<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: llvm::CodeExtractor Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.6 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classllvm_1_1CodeExtractor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">llvm::CodeExtractor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility class for extracting code into a new function.  
 <a href="classllvm_1_1CodeExtractor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CodeExtractor_8h_source.html">CodeExtractor.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa78667b544766a390913132d8e3b45e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#aa78667b544766a390913132d8e3b45e2">CodeExtractor</a> (<a class="el" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="el" href="classbool.html">bool</a> AggregateArgs=<a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>)</td></tr>
<tr class="memdesc:aa78667b544766a390913132d8e3b45e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a code extractor for a single basic block.  <a href="#aa78667b544766a390913132d8e3b45e2">More...</a><br/></td></tr>
<tr class="separator:aa78667b544766a390913132d8e3b45e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7444d5fa1830bbde733bc3ba182544c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#a7444d5fa1830bbde733bc3ba182544c2">CodeExtractor</a> (<a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classllvm_1_1BasicBlock.html">BasicBlock</a> * &gt; BBs, <a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT=nullptr, <a class="el" href="classbool.html">bool</a> AggregateArgs=<a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>)</td></tr>
<tr class="memdesc:a7444d5fa1830bbde733bc3ba182544c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a code extractor for a sequence of blocks.  <a href="#a7444d5fa1830bbde733bc3ba182544c2">More...</a><br/></td></tr>
<tr class="separator:a7444d5fa1830bbde733bc3ba182544c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e4200738c1e0cb57d15647de3125a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#a52e4200738c1e0cb57d15647de3125a0">CodeExtractor</a> (<a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="el" href="classllvm_1_1Loop.html">Loop</a> &amp;L, <a class="el" href="classbool.html">bool</a> AggregateArgs=<a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>)</td></tr>
<tr class="memdesc:a52e4200738c1e0cb57d15647de3125a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a code extractor for a loop body.  <a href="#a52e4200738c1e0cb57d15647de3125a0">More...</a><br/></td></tr>
<tr class="separator:a52e4200738c1e0cb57d15647de3125a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4529a7b78e77f9fc05848405b76e288c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#a4529a7b78e77f9fc05848405b76e288c">CodeExtractor</a> (<a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1RegionNode.html">RegionNode</a> &amp;RN, <a class="el" href="classbool.html">bool</a> AggregateArgs=<a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a>)</td></tr>
<tr class="memdesc:a4529a7b78e77f9fc05848405b76e288c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a code extractor for a region node.  <a href="#a4529a7b78e77f9fc05848405b76e288c">More...</a><br/></td></tr>
<tr class="separator:a4529a7b78e77f9fc05848405b76e288c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce3ed11610e55cc7acff1d3b9a9921c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1Function.html">Function</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#a4ce3ed11610e55cc7acff1d3b9a9921c">extractCodeRegion</a> ()</td></tr>
<tr class="memdesc:a4ce3ed11610e55cc7acff1d3b9a9921c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform the extraction, returning the new function.  <a href="#a4ce3ed11610e55cc7acff1d3b9a9921c">More...</a><br/></td></tr>
<tr class="separator:a4ce3ed11610e55cc7acff1d3b9a9921c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9521453405d76fe9468fd873f53b5e2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#a9521453405d76fe9468fd873f53b5e2f">isEligible</a> () <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> </td></tr>
<tr class="memdesc:a9521453405d76fe9468fd873f53b5e2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test whether this code extractor is eligible.  <a href="#a9521453405d76fe9468fd873f53b5e2f">More...</a><br/></td></tr>
<tr class="separator:a9521453405d76fe9468fd873f53b5e2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470d928d97a2f64c034a4792967c6e95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1CodeExtractor.html#a470d928d97a2f64c034a4792967c6e95">findInputsOutputs</a> (<a class="el" href="classllvm_1_1SetVector.html">ValueSet</a> &amp;Inputs, <a class="el" href="classllvm_1_1SetVector.html">ValueSet</a> &amp;Outputs) <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> </td></tr>
<tr class="memdesc:a470d928d97a2f64c034a4792967c6e95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the set of input values and output values for the code.  <a href="#a470d928d97a2f64c034a4792967c6e95">More...</a><br/></td></tr>
<tr class="separator:a470d928d97a2f64c034a4792967c6e95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility class for extracting code into a new function. </p>
<p>This utility provides a simple interface for extracting some sequence of code into its own function, replacing it with a call to that function. It also provides various methods to query about the nature and result of such a transformation.</p>
<p>The rough algorithm used is: 1) Find both the inputs and outputs for the extracted region. 2) <a class="el" href="classllvm_1_1Pass.html">Pass</a> the inputs as arguments, remapping them within the extracted function to arguments. 3) Add allocas for any scalar outputs, adding all of the outputs' allocas as arguments, and inserting stores to the arguments for any scalars. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8h_source.html#l00044">44</a> of file <a class="el" href="CodeExtractor_8h_source.html">CodeExtractor.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa78667b544766a390913132d8e3b45e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CodeExtractor::CodeExtractor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&#160;</td>
          <td class="paramname"><em>BB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>AggregateArgs</em> = <code><a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a code extractor for a single basic block. </p>
<p>In this formation, we don't require a dominator tree. The given basic block is set up for extraction. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8cpp_source.html#l00122">122</a> of file <a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7444d5fa1830bbde733bc3ba182544c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CodeExtractor::CodeExtractor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt; <a class="el" href="classllvm_1_1BasicBlock.html">BasicBlock</a> * &gt;&#160;</td>
          <td class="paramname"><em>BBs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *&#160;</td>
          <td class="paramname"><em>DT</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>AggregateArgs</em> = <code><a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a code extractor for a sequence of blocks. </p>
<p>Given a sequence of basic blocks where the first block in the sequence dominates the rest, prepare a code extractor object for pulling this sequence out into its new function. When a <a class="el" href="classllvm_1_1DominatorTree.html" title="Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree...">DominatorTree</a> is also given, extra checking and transformations are enabled. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8cpp_source.html#l00126">126</a> of file <a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a52e4200738c1e0cb57d15647de3125a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CodeExtractor::CodeExtractor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Loop.html">Loop</a> &amp;&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>AggregateArgs</em> = <code><a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a code extractor for a loop body. </p>
<p>Behaves just like the generic code sequence constructor, but uses the block sequence of the loop. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8cpp_source.html#l00131">131</a> of file <a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4529a7b78e77f9fc05848405b76e288c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CodeExtractor::CodeExtractor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1RegionNode.html">RegionNode</a> &amp;&#160;</td>
          <td class="paramname"><em>RN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>AggregateArgs</em> = <code><a class="el" href="SimplifyInstructions_8cpp.html#a6dd713bd88673625bb181528a61bdc85">false</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a code extractor for a region node. </p>
<p>Behaves just like the generic code sequence constructor, but uses the block sequence of the region node passed in. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8cpp_source.html#l00135">135</a> of file <a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4ce3ed11610e55cc7acff1d3b9a9921c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1Function.html">Function</a> * CodeExtractor::extractCodeRegion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform the extraction, returning the new function. </p>
<p>Returns zero when called on a <a class="el" href="classllvm_1_1CodeExtractor.html" title="Utility class for extracting code into a new function. ">CodeExtractor</a> instance where isEligible returns false. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8cpp_source.html#l00688">688</a> of file <a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a>.</p>

<p>References <a class="el" href="Path_8cpp_source.html#l00240">llvm::sys::path::begin()</a>, <a class="el" href="BasicBlock_8h_source.html#l00214">llvm::BasicBlock::begin()</a>, <a class="el" href="BasicBlock_8h_source.html#l00111">llvm::BasicBlock::Create()</a>, <a class="el" href="Instructions_8h_source.html#l02487">llvm::BranchInst::Create()</a>, <a class="el" href="Debug_8h_source.html#l00093">DEBUG</a>, <a class="el" href="CodeExtractor_8cpp_source.html#l00160">findInputsOutputs()</a>, <a class="el" href="BasicBlock_8cpp_source.html#l00036">llvm::BasicBlock::getContext()</a>, <a class="el" href="Instructions_8h_source.html#l02187">llvm::PHINode::getIncomingBlock()</a>, <a class="el" href="BasicBlock_8h_source.html#l00235">llvm::BasicBlock::getInstList()</a>, <a class="el" href="Instructions_8h_source.html#l02168">llvm::PHINode::getNumIncomingValues()</a>, <a class="el" href="BasicBlock_8h_source.html#l00119">llvm::BasicBlock::getParent()</a>, <a class="el" href="GlobalValue_8h_source.html#l00346">llvm::GlobalValue::getParent()</a>, <a class="el" href="MD5_8cpp_source.html#l00054">I</a>, <a class="el" href="SmallPtrSet_8h_source.html#l00264">llvm::SmallPtrSetImpl&lt; PtrType &gt;::insert()</a>, <a class="el" href="CodeExtractor_8h_source.html#l00095">isEligible()</a>, <a class="el" href="ilist_8h_source.html#l00554">llvm::iplist&lt; NodeTy, Traits &gt;::push_back()</a>, <a class="el" href="Instructions_8cpp_source.html#l00114">llvm::PHINode::removeIncomingValue()</a>, <a class="el" href="ErrorHandling_8cpp_source.html#l00061">llvm::report_fatal_error()</a>, <a class="el" href="Instructions_8h_source.html#l02206">llvm::PHINode::setIncomingBlock()</a>, <a class="el" href="AMDGPUInstrInfo_8cpp_source.html#l00352">SI</a>, <a class="el" href="SmallPtrSet_8h_source.html#l00079">llvm::SmallPtrSetImplBase::size()</a>, <a class="el" href="Interval_8h_source.html#l00104">llvm::succ_begin()</a>, <a class="el" href="Interval_8h_source.html#l00107">llvm::succ_end()</a>, and <a class="el" href="Verifier_8cpp_source.html#l02851">llvm::verifyFunction()</a>.</p>

</div>
</div>
<a class="anchor" id="a470d928d97a2f64c034a4792967c6e95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CodeExtractor::findInputsOutputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SetVector.html">ValueSet</a> &amp;&#160;</td>
          <td class="paramname"><em>Inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SetVector.html">ValueSet</a> &amp;&#160;</td>
          <td class="paramname"><em>Outputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the set of input values and output values for the code. </p>
<p>These can be used either when performing the extraction or to evaluate the expected size of a call to the extracted function. Note that this work cannot be cached between the two as once we decide to extract a code sequence, that sequence is modified, including changing these sets, before extraction occurs. These modifications won't have any significant impact on the cost however. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8cpp_source.html#l00160">160</a> of file <a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a>.</p>

<p>References <a class="el" href="BasicBlock_8h_source.html#l00214">llvm::BasicBlock::begin()</a>, <a class="el" href="CodeExtractor_8cpp_source.html#l00152">definedInCaller()</a>, <a class="el" href="CodeExtractor_8cpp_source.html#l00142">definedInRegion()</a>, <a class="el" href="BasicBlock_8h_source.html#l00216">llvm::BasicBlock::end()</a>, <a class="el" href="MD5_8cpp_source.html#l00054">I</a>, <a class="el" href="ARMBaseInfo_8h_source.html#l00091">llvm::ARM_PROC::IE</a>, <a class="el" href="SetVector_8h_source.html#l00102">llvm::SetVector&lt; T, Vector, Set &gt;::insert()</a>, and <a class="el" href="Value_8h_source.html#l00299">llvm::Value::users()</a>.</p>

<p>Referenced by <a class="el" href="CodeExtractor_8cpp_source.html#l00688">extractCodeRegion()</a>.</p>

</div>
</div>
<a class="anchor" id="a9521453405d76fe9468fd873f53b5e2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> llvm::CodeExtractor::isEligible </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test whether this code extractor is eligible. </p>
<p>Based on the blocks used when constructing the code extractor, determine whether it is eligible for extraction. </p>

<p>Definition at line <a class="el" href="CodeExtractor_8h_source.html#l00095">95</a> of file <a class="el" href="CodeExtractor_8h_source.html">CodeExtractor.h</a>.</p>

<p>Referenced by <a class="el" href="CodeExtractor_8cpp_source.html#l00688">extractCodeRegion()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="CodeExtractor_8h_source.html">CodeExtractor.h</a></li>
<li><a class="el" href="CodeExtractor_8cpp_source.html">CodeExtractor.cpp</a></li>
</ul>
</div><!-- contents -->
<hr>
<p class="footer">
Generated on Tue Dec 8 2015 01:09:45 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.6</a><br>
Copyright &copy; 2003-2014 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
