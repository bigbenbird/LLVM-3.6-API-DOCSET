<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="keywords" content="LLVM,Low Level Virtual Machine,C++,doxygen,API,documentation"/>
<meta name="description" content="C++ source code API documentation for LLVM."/>
<title>LLVM: PromoteMemoryToRegister.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head><body>
<p class="title">LLVM API Documentation</p>
<!-- Generated by Doxygen 1.8.6 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4d9c1978b5f07b6adb33a8870a898946.html">llvm3.6</a></li><li class="navelem"><a class="el" href="dir_5fa7ecd8d95c317b32615506984470d8.html">lib</a></li><li class="navelem"><a class="el" href="dir_ed2be07ed72f5c44fcceed313c4db32e.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_8ff74e2b520cca3440d5c52be34b3c60.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PromoteMemoryToRegister.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="PromoteMemToReg_8h_source.html">llvm/Transforms/Utils/PromoteMemToReg.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ArrayRef_8h_source.html">llvm/ADT/ArrayRef.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="STLExtras_8h_source.html">llvm/ADT/STLExtras.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="SmallPtrSet_8h_source.html">llvm/ADT/SmallPtrSet.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="SmallVector_8h_source.html">llvm/ADT/SmallVector.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="AliasSetTracker_8h_source.html">llvm/Analysis/AliasSetTracker.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="InstructionSimplify_8h_source.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ValueTracking_8h_source.html">llvm/Analysis/ValueTracking.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="IR_2CFG_8h_source.html">llvm/IR/CFG.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Constants_8h_source.html">llvm/IR/Constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="DIBuilder_8h_source.html">llvm/IR/DIBuilder.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="DebugInfo_8h_source.html">llvm/IR/DebugInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="DerivedTypes_8h_source.html">llvm/IR/DerivedTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Dominators_8h_source.html">llvm/IR/Dominators.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Function_8h_source.html">llvm/IR/Function.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Instructions_8h_source.html">llvm/IR/Instructions.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="IntrinsicInst_8h_source.html">llvm/IR/IntrinsicInst.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Metadata_8h_source.html">llvm/IR/Metadata.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="Local_8h_source.html">llvm/Transforms/Utils/Local.h</a>&quot;</code><br/>
<code>#include &lt;algorithm&gt;</code><br/>
<code>#include &lt;queue&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for PromoteMemoryToRegister.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="PromoteMemoryToRegister_8cpp__incl.png" border="0" usemap="#PromoteMemoryToRegister_8cpp" alt=""/></div>
<map name="PromoteMemoryToRegister_8cpp" id="PromoteMemoryToRegister_8cpp">
<area shape="rect" id="node2" href="PromoteMemToReg_8h.html" title="llvm/Transforms/Utils\l/PromoteMemToReg.h" alt="" coords="448,169,609,211"/><area shape="rect" id="node3" href="ArrayRef_8h.html" title="llvm/ADT/ArrayRef.h" alt="" coords="771,333,918,360"/><area shape="rect" id="node5" href="STLExtras_8h.html" title="llvm/ADT/STLExtras.h" alt="" coords="164,408,322,435"/><area shape="rect" id="node13" href="SmallVector_8h.html" title="llvm/ADT/SmallVector.h" alt="" coords="978,408,1148,435"/><area shape="rect" id="node22" href="DenseMap_8h.html" title="llvm/ADT/DenseMap.h" alt="" coords="1527,333,1690,360"/><area shape="rect" id="node28" href="SmallPtrSet_8h.html" title="llvm/ADT/SmallPtrSet.h" alt="" coords="1915,408,2086,435"/><area shape="rect" id="node29" href="Statistic_8h.html" title="llvm/ADT/Statistic.h" alt="" coords="2852,408,2999,435"/><area shape="rect" id="node32" href="AliasSetTracker_8h.html" title="llvm/Analysis/AliasSetTracker.h" alt="" coords="684,177,900,203"/><area shape="rect" id="node35" href="Metadata_8h.html" title="llvm/IR/Metadata.h" alt="" coords="762,259,902,285"/><area shape="rect" id="node37" href="InstructionSimplify_8h.html" title="llvm/Analysis/Instruction\lSimplify.h" alt="" coords="1325,80,1500,121"/><area shape="rect" id="node39" href="ValueTracking_8h.html" title="llvm/Analysis/ValueTracking.h" alt="" coords="1810,259,2017,285"/><area shape="rect" id="node40" href="IR_2CFG_8h.html" title="llvm/IR/CFG.h" alt="" coords="2333,333,2438,360"/><area shape="rect" id="node41" href="Function_8h.html" title="llvm/IR/Function.h" alt="" coords="2422,408,2554,435"/><area shape="rect" id="node42" href="Constants_8h.html" title="llvm/IR/Constants.h" alt="" coords="1155,259,1299,285"/><area shape="rect" id="node43" href="DerivedTypes_8h.html" title="llvm/IR/DerivedTypes.h" alt="" coords="2514,333,2676,360"/><area shape="rect" id="node44" href="DIBuilder_8h.html" title="llvm/IR/DIBuilder.h" alt="" coords="1576,87,1710,114"/><area shape="rect" id="node45" href="DebugInfo_8h.html" title="llvm/IR/DebugInfo.h" alt="" coords="1466,177,1610,203"/><area shape="rect" id="node46" href="Dominators_8h.html" title="llvm/IR/Dominators.h" alt="" coords="2143,259,2298,285"/><area shape="rect" id="node47" href="Instructions_8h.html" title="llvm/IR/Instructions.h" alt="" coords="926,259,1080,285"/><area shape="rect" id="node48" href="IntrinsicInst_8h.html" title="llvm/IR/IntrinsicInst.h" alt="" coords="1098,177,1249,203"/><area shape="rect" id="node49" href="Local_8h.html" title="llvm/Transforms/Utils\l/Local.h" alt="" coords="2903,80,3058,121"/><area shape="rect" id="node4" href="None_8h.html" title="llvm/ADT/None.h" alt="" coords="623,408,751,435"/><area shape="rect" id="node6" href="Compiler_8h.html" title="llvm/Support/Compiler.h" alt="" coords="2100,572,2274,599"/><area shape="rect" id="node14" href="iterator__range_8h.html" title="llvm/ADT/iterator_range.h" alt="" coords="1132,490,1317,517"/><area shape="rect" id="node15" href="AlignOf_8h.html" title="llvm/Support/AlignOf.h" alt="" coords="944,490,1107,517"/><area shape="rect" id="node16" href="MathExtras_8h.html" title="llvm/Support/MathExtras.h" alt="" coords="1705,490,1896,517"/><area shape="rect" id="node19" href="type__traits_8h.html" title="llvm/Support/type_traits.h" alt="" coords="1392,490,1579,517"/><area shape="rect" id="node23" href="DenseMapInfo_8h.html" title="llvm/ADT/DenseMapInfo.h" alt="" coords="2161,408,2346,435"/><area shape="rect" id="node24" href="PointerLikeTypeTraits_8h.html" title="llvm/Support/PointerLike\lTypeTraits.h" alt="" coords="2326,483,2504,524"/><area shape="rect" id="node30" href="Atomic_8h.html" title="llvm/Support/Atomic.h" alt="" coords="3028,490,3192,517"/><area shape="rect" id="node31" href="Valgrind_8h.html" title="llvm/Support/Valgrind.h" alt="" coords="2782,490,2952,517"/><area shape="rect" id="node33" href="ilist_8h.html" title="llvm/ADT/ilist.h" alt="" coords="396,408,511,435"/><area shape="rect" id="node34" href="ilist__node_8h.html" title="llvm/ADT/ilist_node.h" alt="" coords="592,333,747,360"/><area shape="rect" id="node36" href="ValueHandle_8h.html" title="llvm/IR/ValueHandle.h" alt="" coords="1628,259,1786,285"/><area shape="rect" id="node38" href="User_8h.html" title="llvm/IR/User.h" alt="" coords="1333,177,1441,203"/></map>
</div>
</div>
<p><a href="PromoteMemoryToRegister_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;mem2reg&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abe014602428675793f21d1dd21ef6d30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#abe014602428675793f21d1dd21ef6d30">STATISTIC</a> (NumLocalPromoted,&quot;Number of alloca's promoted within one block&quot;)</td></tr>
<tr class="separator:abe014602428675793f21d1dd21ef6d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af96b930dd85e74a580db1e8497882403"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#af96b930dd85e74a580db1e8497882403">STATISTIC</a> (NumSingleStore,&quot;Number of alloca's promoted with a single store&quot;)</td></tr>
<tr class="separator:af96b930dd85e74a580db1e8497882403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb9e3c65e81db1259e7e61d65d373f05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#abb9e3c65e81db1259e7e61d65d373f05">STATISTIC</a> (NumDeadAlloca,&quot;Number of dead alloca's removed&quot;)</td></tr>
<tr class="separator:abb9e3c65e81db1259e7e61d65d373f05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3385c74eb1b28168d2bfe55622d617"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#adc3385c74eb1b28168d2bfe55622d617">STATISTIC</a> (NumPHIInsert,&quot;Number of PHI nodes inserted&quot;)</td></tr>
<tr class="separator:adc3385c74eb1b28168d2bfe55622d617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8693fb5ac5ae6cc079025486261792"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#a2e8693fb5ac5ae6cc079025486261792">removeLifetimeIntrinsicUsers</a> (<a class="el" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI)</td></tr>
<tr class="separator:a2e8693fb5ac5ae6cc079025486261792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeeb38b5af7c94ee5e59feafb87ad18c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#aeeeb38b5af7c94ee5e59feafb87ad18c">rewriteSingleStoreAlloca</a> (<a class="el" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI, AllocaInfo &amp;Info, LargeBlockInfo &amp;LBI, <a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT, <a class="el" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> *AST)</td></tr>
<tr class="memdesc:aeeeb38b5af7c94ee5e59feafb87ad18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rewrite as many loads as possible given a single store.  <a href="#aeeeb38b5af7c94ee5e59feafb87ad18c">More...</a><br/></td></tr>
<tr class="separator:aeeeb38b5af7c94ee5e59feafb87ad18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd74321a4d6c3a9b970e83cd7c4838e8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PromoteMemoryToRegister_8cpp.html#acd74321a4d6c3a9b970e83cd7c4838e8">promoteSingleBlockAlloca</a> (<a class="el" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> AllocaInfo &amp;Info, LargeBlockInfo &amp;LBI, <a class="el" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> *AST)</td></tr>
<tr class="separator:acd74321a4d6c3a9b970e83cd7c4838e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;mem2reg&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="PromoteMemoryToRegister_8cpp_source.html#l00053">53</a> of file <a class="el" href="PromoteMemoryToRegister_8cpp_source.html">PromoteMemoryToRegister.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="acd74321a4d6c3a9b970e83cd7c4838e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void promoteSingleBlockAlloca </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *&#160;</td>
          <td class="paramname"><em>AI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> AllocaInfo &amp;&#160;</td>
          <td class="paramname"><em>Info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LargeBlockInfo &amp;&#160;</td>
          <td class="paramname"><em>LBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> *&#160;</td>
          <td class="paramname"><em>AST</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Many allocas are only used within a single basic block. If this is the case, avoid traversing the CFG and inserting a lot of potentially useless PHI nodes by just performing a single linear pass over the basic block using the Alloca.</p>
<p>If we cannot promote this alloca (because it is read before it is written), return true. This is necessary in cases where, due to control flow, the alloca is potentially undefined on some control flow paths. e.g. code like this is potentially correct:</p>
<p>for (...) { if (c) { A = undef; undef = B; } }</p>
<p>... so long as A is not used before undef is set. </p>

<p>Definition at line <a class="el" href="PromoteMemoryToRegister_8cpp_source.html#l00449">449</a> of file <a class="el" href="PromoteMemoryToRegister_8cpp_source.html">PromoteMemoryToRegister.cpp</a>.</p>

<p>References <a class="el" href="Local_8cpp_source.html#l00996">llvm::ConvertDebugDeclareToDebugValue()</a>, <a class="el" href="AliasSetTracker_8cpp_source.html#l00514">llvm::AliasSetTracker::deleteValue()</a>, <a class="el" href="Casting_8h_source.html#l00285">llvm::dyn_cast()</a>, <a class="el" href="Instruction_8cpp_source.html#l00065">llvm::Instruction::eraseFromParent()</a>, <a class="el" href="Constants_8cpp_source.html#l01446">llvm::UndefValue::get()</a>, <a class="el" href="Instruction_8h_source.html#l00054">llvm::Instruction::getParent()</a>, <a class="el" href="BasicBlock_8h_source.html#l00119">llvm::BasicBlock::getParent()</a>, <a class="el" href="GlobalValue_8h_source.html#l00346">llvm::GlobalValue::getParent()</a>, <a class="el" href="Value_8h_source.html#l00222">llvm::Value::getType()</a>, <a class="el" href="Type_8h_source.html#l00217">llvm::Type::isPointerTy()</a>, <a class="el" href="SmallVector_8h_source.html#l00221">llvm::SmallVectorTemplateBase&lt; T, isPodLike &gt;::push_back()</a>, <a class="el" href="Value_8cpp_source.html#l00319">llvm::Value::replaceAllUsesWith()</a>, <a class="el" href="AMDGPUInstrInfo_8cpp_source.html#l00352">SI</a>, <a class="el" href="Value_8h_source.html#l00274">llvm::Value::use_empty()</a>, <a class="el" href="Instruction_8h_source.html#l00051">llvm::Instruction::user_back()</a>, <a class="el" href="Value_8h_source.html#l00293">llvm::Value::user_begin()</a>, <a class="el" href="Value_8h_source.html#l00295">llvm::Value::user_end()</a>, and <a class="el" href="Value_8h_source.html#l00299">llvm::Value::users()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e8693fb5ac5ae6cc079025486261792"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void removeLifetimeIntrinsicUsers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *&#160;</td>
          <td class="paramname"><em>AI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="PromoteMemoryToRegister_8cpp_source.html#l00319">319</a> of file <a class="el" href="PromoteMemoryToRegister_8cpp_source.html">PromoteMemoryToRegister.cpp</a>.</p>

<p>References <a class="el" href="Instruction_8cpp_source.html#l00065">llvm::Instruction::eraseFromParent()</a>, <a class="el" href="Value_8h_source.html#l00222">llvm::Value::getType()</a>, <a class="el" href="MD5_8cpp_source.html#l00054">I</a>, <a class="el" href="Type_8h_source.html#l00137">llvm::Type::isVoidTy()</a>, <a class="el" href="Value_8h_source.html#l00293">llvm::Value::user_begin()</a>, and <a class="el" href="Value_8h_source.html#l00295">llvm::Value::user_end()</a>.</p>

</div>
</div>
<a class="anchor" id="aeeeb38b5af7c94ee5e59feafb87ad18c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classbool.html">bool</a> rewriteSingleStoreAlloca </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *&#160;</td>
          <td class="paramname"><em>AI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AllocaInfo &amp;&#160;</td>
          <td class="paramname"><em>Info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LargeBlockInfo &amp;&#160;</td>
          <td class="paramname"><em>LBI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1AliasSetTracker.html">AliasSetTracker</a> *&#160;</td>
          <td class="paramname"><em>AST</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rewrite as many loads as possible given a single store. </p>
<p>When there is only a single store, we can use the domtree to trivially replace all of the dominated loads with the stored value. Do so, and return true if this has successfully promoted the alloca entirely. If this returns false there were some loads which were not dominated by the single store and thus must be phi-ed with undef. We fall back to the standard alloca promotion algorithm in that case. </p>

<p>Definition at line <a class="el" href="PromoteMemoryToRegister_8cpp_source.html#l00351">351</a> of file <a class="el" href="PromoteMemoryToRegister_8cpp_source.html">PromoteMemoryToRegister.cpp</a>.</p>

<p>References <a class="el" href="GlobalMerge_8cpp.html#a65c1240c404c646dd0e63fdcbf620730">assert()</a>, <a class="el" href="Local_8cpp_source.html#l00996">llvm::ConvertDebugDeclareToDebugValue()</a>, <a class="el" href="AliasSetTracker_8cpp_source.html#l00514">llvm::AliasSetTracker::deleteValue()</a>, <a class="el" href="Dominators_8cpp_source.html#l00218">llvm::DominatorTree::dominates()</a>, <a class="el" href="Instruction_8cpp_source.html#l00065">llvm::Instruction::eraseFromParent()</a>, <a class="el" href="Constants_8cpp_source.html#l01446">llvm::UndefValue::get()</a>, <a class="el" href="User_8h_source.html#l00089">llvm::User::getOperand()</a>, <a class="el" href="Instruction_8h_source.html#l00054">llvm::Instruction::getParent()</a>, <a class="el" href="BasicBlock_8h_source.html#l00119">llvm::BasicBlock::getParent()</a>, <a class="el" href="GlobalValue_8h_source.html#l00346">llvm::GlobalValue::getParent()</a>, <a class="el" href="Value_8h_source.html#l00222">llvm::Value::getType()</a>, <a class="el" href="Type_8h_source.html#l00217">llvm::Type::isPointerTy()</a>, <a class="el" href="Value_8cpp_source.html#l00319">llvm::Value::replaceAllUsesWith()</a>, <a class="el" href="Value_8h_source.html#l00293">llvm::Value::user_begin()</a>, and <a class="el" href="Value_8h_source.html#l00295">llvm::Value::user_end()</a>.</p>

</div>
</div>
<a class="anchor" id="abe014602428675793f21d1dd21ef6d30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLocalPromoted&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of alloca's promoted within one block&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af96b930dd85e74a580db1e8497882403"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumSingleStore&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of alloca's promoted with a single store&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abb9e3c65e81db1259e7e61d65d373f05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumDeadAlloca&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of dead alloca's removed&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adc3385c74eb1b28168d2bfe55622d617"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumPHIInsert&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of PHI nodes inserted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<hr>
<p class="footer">
Generated on Tue Dec 8 2015 00:59:53 for <a href="http://llvm.org/">LLVM</a> by
<a href="http://www.doxygen.org"><img src="doxygen.png" alt="Doxygen"
align="middle" border="0"/>1.8.6</a><br>
Copyright &copy; 2003-2014 University of Illinois at Urbana-Champaign.
All Rights Reserved.</p>
<hr>
<!--#include virtual="/attrib.incl" -->
</body>
</html>
